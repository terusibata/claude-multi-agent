# AIエージェントバックエンド 環境変数設定例

# ============================================
# データベース設定
# ============================================
DB_USER=aiagent
DB_PASSWORD=aiagent_password
DB_NAME=aiagent
DB_PORT=5432
DATABASE_URL=postgresql+asyncpg://aiagent:aiagent_password@localhost:5432/aiagent

# ============================================
# Redis設定
# ============================================
# Redis接続URL（分散ロック、レート制限に使用）
REDIS_URL=redis://localhost:6379/0
# 最大接続数
REDIS_MAX_CONNECTIONS=20

# ============================================
# AWS Bedrock設定
# ============================================
# Bedrockを使用する場合は必ず1に設定
CLAUDE_CODE_USE_BEDROCK=1

# AWSリージョン
AWS_REGION=us-west-2

# 開発環境: AWS認証情報（本番環境ではIAMロールを使用）
AWS_ACCESS_KEY_ID=your_access_key_id
AWS_SECRET_ACCESS_KEY=your_secret_access_key
# AWS_SESSION_TOKEN=your_session_token  # 一時認証情報使用時

# モデル設定（global.プレフィックス = クロスリージョン推論）
# Sonnetモデル（メインエージェント用）
ANTHROPIC_SONNET_MODEL=global.anthropic.claude-sonnet-4-5-20250929-v1:0
# Haikuモデル（サブエージェント用）
ANTHROPIC_HAIKU_MODEL=global.anthropic.claude-haiku-4-5-20251001-v1:0
# SDKが使用するサブエージェントのデフォルトモデルエイリアス（haiku / sonnet / opus）
CLAUDE_CODE_SUBAGENT_MODEL=haiku

# ============================================
# アプリケーション設定
# ============================================
APP_ENV=development
APP_PORT=8000
LOG_LEVEL=INFO

# Skills保存ベースパス
SKILLS_BASE_PATH=/skills

# ============================================
# S3ワークスペース設定
# ============================================
# ワークスペース用S3バケット名
S3_BUCKET_NAME=your-workspace-bucket
# S3内のプレフィックス
S3_WORKSPACE_PREFIX=workspaces/
# ローカルワークスペース一時ディレクトリ
WORKSPACE_TEMP_DIR=/var/lib/aiagent/workspaces

# ファイルアップロード制限（バイト、デフォルト: 100MB）
MAX_UPLOAD_FILE_SIZE=104857600

# ============================================
# セキュリティ設定
# ============================================
# CORS許可オリジン（カンマ区切り）
CORS_ORIGINS=http://localhost:3000,http://localhost:3001

# CORS許可メソッド（カンマ区切り）
CORS_METHODS=GET,POST,PUT,DELETE,OPTIONS

# CORS許可ヘッダー（カンマ区切り）
# X-User-ID, X-Tenant-ID: AI実行系API用（一般ユーザー）
# X-Admin-ID: 管理系API用（管理者）
CORS_HEADERS=Content-Type,Authorization,X-API-Key,X-Request-ID,X-Tenant-ID,X-User-ID,X-Admin-ID

# API認証キー（カンマ区切りで複数指定可能）
# 本番環境では必ず設定してください
# 空の場合は認証が無効化されます（開発環境用）
API_KEYS=

# レート制限
# 有効/無効の切り替え
RATE_LIMIT_ENABLED=true
# ウィンドウあたりの最大リクエスト数
RATE_LIMIT_REQUESTS=100
# ウィンドウサイズ（秒）
RATE_LIMIT_PERIOD=60

# HSTS（HTTP Strict Transport Security）
# 有効/無効の切り替え
HSTS_ENABLED=true
# max-age（秒）
HSTS_MAX_AGE=31536000
